<section class="h-100 gradient-custom">
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col-lg-12 col-xl-12">
        <div class="card" style="border-radius: 10px;">
          <div class="card-header px-4 py-5">
            {{#if orders}}
            <h5 class="text-muted mb-0">Thanks for your Order, <span style="color: #342d45;">{{user.Name}}</span>!</h5>
          </div>
          <div class="container card-body p-4">
            <div class="d-flex justify-content-between align-items-center mb-4">
              <p class="lead fw-normal mb-0" style="color: #a8729a;">Receipt</p>

            </div>
            <div class="card shadow-0 border mb-4">
              <div class="card-body">
                <div class="row">

                  <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-muted mb-0">Date</p>
                  </div>
                  <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-muted mb-0">Address</p>
                  </div>
                  <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-muted mb-0 small">Pincode</p>
                  </div>
                  <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                    <p class="text-muted mb-0 small">Moblie</p>
                  </div>

                  <div class="col-md-1 text-center d-flex justify-content-center align-items-center">
                    <p class="text-muted mb-0 small">Payment</p>
                  </div>
                  <div class="col-md-1 text-center d-flex justify-content-center align-items-center">
                    <p class="text-muted mb-0 small">Amount</p>
                  </div>

                   <div class="col-md-1 text-center d-flex justify-content-center align-items-center">
                    <p class="text-muted mb-0 small">status</p>
                  </div>

                </div>
                <hr class="mb-4" style="background-color: #e0e0e0; opacity: 1;">

                {{!-- next line --}}
                {{#each orders}}
                <div class="card-body">
                  <div class="row">

                    <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                      <p class="text-muted mb-0">{{this.date}}</p>
                    </div>
                    <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                      <p class="text-muted mb-0">{{this.deliveryDetails.address}}</p>
                    </div>
                    <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                      <p class="text-muted mb-0">{{this.deliveryDetails.pincode}}</p>
                    </div>
                    <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                      <p class="text-muted mb-0">{{this.deliveryDetails.mobile}}</p>
                    </div>

                    <div class="col-md-2 text-center d-flex justify-content-center align-items-center">
                      <p class="text-muted mb-0">{{this.paymentmethod}}</p>
                    </div>
                    <div class="col-md-1 text-center d-flex justify-content-center align-items-center">
                      <p class="text-muted mb-0">{{this.totalAmount}}</p>
                    </div>
                    <div class="col-md-1 text-center d-flex justify-content-center align-items-center">
                     <button class="btn-sucsess" style="background-color: rgb(63, 207, 102);">{{this.status}} </button>
                    </div>
                    
                    

                    <div class="card-footer border-0 px-3 py-"
                      style="background-color: #131414 ; background-image: linear-gradient(315deg, #000000 0%, #b82e1f 74%); border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;">
                      <a href="/view-order-products/{{this._id}}" class="btn btn-dark py-1">View Products </a>
                     {{#if can}}
                      <button class="btn btn-dark py-1" onclick= "cancelOrder('{{this._id}}')" >cancel order</button>
                     {{/if}}
                     {{#if delivered}}
                     <button class="btn btn-dark">return</button>
                     {{/if}}
                      <h5 class="d-flex align-items-center justify-content-end text-white text-uppercase mb-0">Total
                        : <span class="h2 mb-0 ms-2">{{this.totalAmount}}</span></h5>
                    </div>

                    <hr class="mb-4" style="background-color: #e0e0e0; opacity: 1;">

                    {{/each}}
                    {{else}}
                    <h3>you have no orders</h3>
                     <div class="row">
                        <div class="col-lg-6 col-md-6 col-sm-6">
                            <div class="continue__btn " style="border-bottom:dark;" >
                                <a href="/">Continue Shopping</a>
                            </div>
                        </div>
                       
                    </div>
                </div>

{{/if}}


                    </div>
                  </div>
                </div>


               
              </div>
             
            </div>
          </div>

        </div>
      </div>
</section>



<style>
  .gradient-custom {
    background-color: #000000;
    background-image: linear-gradient(315deg, #000000 0%, #b82e1f 74%);

  }
</style>
<script>
  function cancelOrder(orderId){
    $.ajax({
      url:'/cancel-order',
      method:"post",
      data:{
        orderId:orderId
      },
     success:(response)=>{
                if(response){
                  alert('cancel')
                    location.reload()  
                }
            }
    })
  }

</script>